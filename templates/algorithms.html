<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Title Page-->
    <title>Recommendation Form</title>
    <link href="static/colorlib-regform-1/vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link rel="stylesheet" media="screen" href="static/bootstrap-4.5.0-dist/css/bootstrap.min.css">

    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <style>

    .topnav {
      overflow: hidden;
      background-color: #333;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1
    }
    .topnav a {
      float: left;
      display: block;
      color: #f2f2f2;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
    }
    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }
    .topnav a.active {
      background-color: #4CAF50;
      color: white;
    }

    .topnav .icon {
      display: none;
    }

    @media screen and (max-width: 600px) {
      .topnav a:not(:first-child) {display: none;}
      .topnav a.icon {
        float: right;
        display: block;
      }
    }
    @media screen and (max-width: 600px) {
      .topnav.responsive .icon {
        position: absolute;
        right: 0;
        top: 0;
      }
      .topnav.responsive a {
        float: none;
        display: block;
        text-align: left;
        z-index: 1
      }

    </style>

</head>

<body style="background-color: #2c6ed5">
    <div class="topnav" id="myTopnav">
      <a href="{{ url_for('start_app') }}">Home</a>
      <a href="{{ url_for('form') }}">Form</a>
      <a href="{{ url_for('algorithms') }}" class="active">Algorithms</a>
      <a href="javascript:void(0);" class="icon" onclick="myFunction()">
        <i class="fa fa-bars"></i>
      </a>
    </div>
    <br/>
    <br/>
<section class="py-5 header">
    <div class="container py-4">

        <div class="row">
            <div class="col-md-3">
                <!-- Tabs nav -->
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link mb-3 p-3 shadow active" style="background-color:black;"  id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">
                        <span class="font-weight-bold small text-uppercase">SVD</span>
                    </a>

                    <a class="nav-link mb-3 p-3 shadow" id="v-pills-profile-tab" style="background-color:black;"  data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">
                        <span class="font-weight-bold small text-uppercase">KNN Item Baseline</span>
                    </a>

                    <a class="nav-link mb-3 p-3 shadow" style="background-color:black;"  id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">
                        <span class="font-weight-bold small text-uppercase">Weighted Hybrid</span>
                    </a>

                    <a class="nav-link mb-3 p-3 shadow" style="background-color:black;" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false">
                        <span class="font-weight-bold small text-uppercase">User Collaborative</span>
                    </a>
                </div>
            </div>


            <div class="col-md-9">
                <!-- Tabs content -->
                <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade shadow rounded bg-white show active p-5" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                        <h4 class="font-italic mb-4">SVD</h4>
                        <ul class="nav nav-tabs nav-fill" id="myTab" role="tablist">
                          <li class="nav-item">
                            <a class="nav-link active" id="about-tab" data-toggle="tab" href="#about" role="tab" aria-controls="about" aria-selected="true">About</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" id="models-tab" data-toggle="tab" href="#models" role="tab" aria-controls="models" aria-selected="false">Models</a>
                          </li>
                        </ul>
                        <div class="tab-content" id="myTabContent">
                          <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab"> <br/>
                              <p>
                                  The famous SVD algorithm, as popularized by Simon Funk during the Netflix Prize.
                                  The prediction \( \hat{r}_{ui} \) is set as: $$ \hat{r}_{ui} = \mu + b_u + b_i + q_i^Tp_u $$

                                  To estimate all the unknown, we minimize the following regularized squared error:
                                  $$ \sum_{r_{ui} \in R_{train}} \left(r_{ui} - \hat{r}_{ui} \right)^2 +
                                        \lambda\left(b_i^2 + b_u^2 + ||q_i||^2 + ||p_u||^2\right) $$

                                  The minimization is performed by a very straightforward stochastic gradient descent
                                  $$ \begin{split}b_u &\leftarrow b_u &+ \gamma (e_{ui} - \lambda b_u)\\
                                    b_i &\leftarrow b_i &+ \gamma (e_{ui} - \lambda b_i)\\
                                    p_u &\leftarrow p_u &+ \gamma (e_{ui} \cdot q_i - \lambda p_u)\\
                                    q_i &\leftarrow q_i &+ \gamma (e_{ui} \cdot p_u - \lambda q_i)\end{split}
                                  $$
                                  where \( e_{ui} = r_{ui} - \hat{r}_{ui}. \)

                              </p>

                               <blockquote class="blockquote">
                                  <footer class="blockquote-footer">
                                      <cite title="Surprise">
                                          From
                                        <a href="https://surprise.readthedocs.io/en/stable/matrix_factorization.html?=svd" target="_blank">
                                            Surprise
                                        </a>
                                      </cite>
                                  </footer>
                              </blockquote>
                          </div>

                          <div class="tab-pane fade" id="models" role="tabpanel" aria-labelledby="models-tab">
                                <br/>
                                <table class="table">
                                  <thead class="thead-light">
                                    <tr>
                                      <th scope="col">Model name</th>
                                      <th scope="col">&nbsp;</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                   {% for model in models["svd"] %}
                                        <tr>
                                          <td>{{ model }}</td>
                                          <td>
                                                <button type="button" class="btn btn-info" data-href="algo=svd&model={{ model }}" data-toggle="modal" data-target="#confirm-delete" >
                                                   <span class="fa fa-trash"></span> Trash
                                                </button>
                                          </td>
                                        </tr>
                                  {% endfor %}
                                  </tbody>
                                </table>
                          </div>

                        </div>

                    </div>

                    <div class="tab-pane fade shadow rounded bg-white p-5" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                        <h4 class="font-italic mb-4">Bookings</h4>
                        <p class="font-italic text-muted mb-2">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>

                    <div class="tab-pane fade shadow rounded bg-white p-5" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                        <h4 class="font-italic mb-4">Reviews</h4>
                        <p class="font-italic text-muted mb-2">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>

                    <div class="tab-pane fade shadow rounded bg-white p-5" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                        <h4 class="font-italic mb-4">Confirm booking</h4>
                        <p class="font-italic text-muted mb-2">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                Are you sure you want to delete this modal?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">No</button>
                <a class="btn btn-danger btn-ok" >Yes</a>
            </div>
        </div>
    </div>
</div>

    </div>

    <script type="text/javascript"  src="static/bootstrap-4.5.0-dist/js/jquery-3.5.1.js"></script>
    <script type="text/javascript"  src="static/bootstrap-4.5.0-dist/js/popper.min.js"></script>
    <script type="text/javascript"  src="static/bootstrap-4.5.0-dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/topnav.js"></script>
    <script>
        $('#confirm-delete').on('show.bs.modal', function(e) {
                url = "/delete/model?" + $(e.relatedTarget).data('href')
                deleteRow = $(e.relatedTarget).closest("tr")[0]

                $(this).find('.btn-ok').click(function(e) {
                     $.ajax({
                           url: url,
                           type: "GET",//type of posting the data
                           success: function (data) {
                             deleteRow.style.display = "None"
                           },
                           error: function(xhr, ajaxOptions, thrownError){
                               alert("Sorry, system failed to delete this model")
                           },
                           timeout : 15000//timeout of the ajax call
                      });
                     $('#confirm-delete').modal("hide")
                })
         });

    </script>




</body>

</html>
